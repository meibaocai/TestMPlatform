{% extends 'base.html' %}{% load staticfiles %}{% block title %}    首页-测试管理平台{% endblock %}{% block page_title %}    <ul class="breadcrumb">        <li>            <i class="icon-home"></i>            <a href="/index">Home</a>            <i class="icon-angle-right"></i>        </li>        <li><a href="{% url 'api:AddGlobalParameter' %}">API自动化 >全局参数配置 >新增参数</a></li>    </ul>{% endblock %}{% block contend %}<div class="portlet-body form">    <!-- BEGIN FORM-->    <form action="{% url 'api:AddGlobalParameter' %}" id="form_sample_1" class="form-horizontal"  method="post">        {% csrf_token %}        <div class="control-group">            <label class="control-label">参数名称<span class="required">*</span></label>            <div class="controls">                <input type="text" id="name" name="name" data-required="1" class="span6 m-wrap">            </div>        </div>        <div class="control-group">            <label class="control-label">参数描述<span class="required">*</span></label>            <div class="controls">                <input type="text"id="desc" name="desc" data-required="1" class="span6 m-wrap">            </div>        </div>        <div class="control-group">            <label class="control-label">环境&参数类型<span class="required">*</span></label>            <div class="controls">                <select class="selectpicker" id="belong_env" name="belong_env"   multiple data-live-search="true" data-max-options="1"style="width:120px;" title="--请选环境--">                        {% for envs in all_env %}                            <option value="{{ envs.id }}"> {{ envs.env_name }}</option>                        {% endfor %}                </select>                <select class="selectpicker" id="param_type" name="param_type"   multiple data-live-search="true" data-max-options="1"style="width:120px;" title="--请选参数类型--">                        <option value="1"> KEY-VALUE类型</option>{#                        <option value="2">SQL类型</option>#}                        <option value="3">测试用例类型</option>                </select>            </div>        </div>        <div class="control-group"><div class="hr-line-dashed" style="border-top: 1px dashed lightgray;"></div></div>        <!-- key-value的隐藏div -->        <div id="key-value" class="control-group" >            <label class="control-label">参数值<span class="required">*</span></label>            <div class="controls">                <input type="text" id="value" name="value" data-required="1" >            </div>        </div>        <!-- SQL类型的隐藏div -->        <div id="sql-div" class="control-group" style="display: none" >            <div class="control-group">            <label class="control-label">SQL语句<span class="required">*</span></label>                <div class="controls">                    <textarea rows="3"  class="span6 m-wrap" id="param_content" name="param_content"></textarea>                </div>            </div>            <div class="control-group">                <label class="control-label">返回值</label>                <div class="controls">                    <input type="text" id="sql_value" name="sql_value" value="" placeholder="SQL运行后的值" disabled="disabled">                </div>            </div>        </div>        <!-- case-value的隐藏div -->        <div class="control-group" id="case-div"  style="display: none" >            <div class="control-group">                <label class="control-label">选择用例<span class="required">*</span></label>                <div class="controls">                    <select class="selectpicker" multiple data-live-search="true" data-max-options="1" name="related_case_id" id="related_case_id"style="width:auto;" title="--请选择用例--">                         <option value="">--请选择用例--</option>                        {% for apicase in all_apicase %}                           <option value="{{ apicase.id }}">{{ apicase.api_name }}</option>                       {% endfor %}                    </select>                </div>            </div>            <div class="form-group">                <table class="table table-bordered">                        <thead>                        <tr>                            <th>参数名</th>                            <th>响应HeaderName</th>                            <th>响应CookieName</th>                            <th>JsonPath</th>                        </tr>                        </thead>                        <tbody>                        <tr>                            <td style="padding: 1px;" align="center" id="parameter_name" data-value="{{ name }}" ></td>                            <td style="padding: 1px"><input type="text" id="param_header" name="param_header"></td>                            <td style="padding: 1px"><input type="text" id="param_cookie" name="param_cookie" ></td>                            <td style="padding: 1px"><input type="text" id="param_path" name="param_path"></td>                        </tr>                        </tbody>                </table>            </div>        </div>        <div class="control-group" >            <H4  style="color: #1b23ff" align="center">{{ msg }}</H4>            <b style="color: #4b4cff">{% for key,error in AddGlobalParameter_Form.errors.items %}{{ key }}{{ error }}{% endfor %}</b>        </div>        <div class="form-actions">            <button type="submit" class="btn green ">确认</button>            <a href="{% url 'api:GlobalParameterList' %}">                <button type="button" class="btn" style="margin-left: 30px">取消</button>            </a>        </div>    </form>    <!-- END FORM--></div>{% endblock %}{% block myjs %}<script>$("#param_type").change(function() {    var param_type = $("#param_type").val();    //alert(param_type)    if (param_type =="1")    {            $("#key-value").show();            $("#sql-div").hide();            $("#case-div").hide();    }        if (param_type =="2")    {        $("#key-value").hide();        $("#sql-div").show();        $("#case-div").hide();    }    if (param_type =="3")    {        $("#key-value").hide();        $("#sql-div").hide();        $("#case-div").show();    }    //document.getElementById("key-value").style.display="";});</script>{% endblock %}